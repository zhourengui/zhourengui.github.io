<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>全局对象 | LittleBoy-前端爱好者</title>
<meta name="description" content="一位前端爱好者的大前端养成记" />
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" href="/styles/main.css">

<script src="/media/js/jquery.min.js"></script>
<script src="/media/js/masonry.pkgd.min.js"></script>
<script src="/media/js/aos.js"></script>
<script src="/media/js/pace.min.js"></script>
<script src="/media/js/view-image.min.js"></script>
<script src="/media/js/jquery.magnific-popup.min.js"></script>
<script src="/media/js/functions.js"></script>
    <meta name="referrer" content="never">
    <meta name="description" content="前言：
JavaScript 中有一个特殊的对象，称为全局对象（Global Object），它及其所有属性都可以在程序的任何地方访问，即全局变量。
在浏览器 JavaScript 中，通常 window 是全局对象， 而 Node.js ..." />
    <meta name="keywords" content="" />
    <script src="/media/js/waterfall.min.js"></script>
    <script src="/media/js/prism.min.js"></script>
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href=""><img src="/media/images/custom-headerLogo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                <li class=""><a href="" class="menu">首页</a></li>
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/tags" class="menu">
                      标签
                    </a>
                  </li>
                
                <li class="search-menu-item hide-on-mobile hide-on-tablet"><a href="#search-lightbox" class="lightbox mfp-inline"><i class="fa fa-search-line"></i></a></li>
              </ul>
            </nav>
            <a href="#search-lightbox" class="lightbox epcl-search-button mfp-inline hide-on-tablet hide-on-desktop"><i class="fa fa-search-line"></i></a>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>
      <div class="hide-on-mobile hide-on-tablet hide-on-desktop">
        <div id="search-lightbox" class="grid-container grid-small grid-parent mfp-hide">
          <div class="search-wrapper section">
            <form id="gridea-search-form" data-update="1601366771406" action="/search/index.html" class="search-form" _lpchecked="1">
              <input type="text" name="q" id="s" value="" class="search-field" placeholder="搜点啥..." aria-label="搜点啥..." required="">
              <button type="submit" class="submit" aria-label="Submit">
                <i class="fa fa-search-line"></i>
              </button>
            </form>
          </div>
        </div>
      </div>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('/media/images/gridea.jpg');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2020-09-19"><i class="fa fa-calendar"></i><span class="lately">10 天前</span></time>
              
              <a href="/quan-ju-dui-xiang#comments" class="comments meta-info" title="">
                <i class="fa fa-comment remixicon"></i><span class="comment-count valine-comment-count" data-xid="/quan-ju-dui-xiang/"> </span>
              </a>
              <span id="/quan-ju-dui-xiang/" class="leancloud_visitors views-counter meta-info" title=""><i class="fa fa-leancloud remixicon"></i><span class="leancloud-visitors-count"></span></span>
              
            </div>
            <div class="info">
              <div class="tags ">
                
              </div>
              <h1 class="title ularge white bold">全局对象</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <p>前言：</p>
<p>JavaScript 中有一个特殊的对象，称为全局对象（Global Object），它及其所有属性都可以在程序的任何地方访问，即全局变量。</p>
<p>在浏览器 JavaScript 中，通常 window 是全局对象， 而 Node.js 中的全局对象是 global，所有全局变量（除了 global 本身以外）都是 global 对象的属性。</p>
<p>在 Node.js 我们可以直接访问到 global 的属性，而不需要在应用中包含它。</p>
<h2 id="全局对象与全局变量">全局对象与全局变量</h2>
<p>global 最根本的作用是作为全局变量的宿主。按照 ECMAScript 的定义，满足以下条 件的变量是全局变量：</p>
<ul>
<li>在最外层定义的变量；</li>
<li>全局对象的属性；</li>
<li>隐式定义的变量（未定义直接赋值的变量）。</li>
</ul>
<p>当你定义一个全局变量时，这个变量同时也会成为全局对象的属性，反之亦然。需要注 意的是，在 Node.js 中你不可能在最外层定义变量，因为所有用户代码都是属于当前模块的， 而模块本身不是最外层上下文。</p>
<p><code>注意：</code> 最好不要使用 var 定义变量以避免引入全局变量，因为全局变量会污染命名空间，提高代码的耦合风险。</p>
<h3 id="__filename">__filename</h3>
<p>__filename 表示当前正在执行的脚本的文件名。它将输出文件所在位置的绝对路径，且和命令行参数所指定的文件名不一定相同。 如果在模块中，返回的值是模块文件的路径。</p>
<h4 id="实例">实例</h4>
<p>创建文件 main.js ，代码如下所示：</p>
<pre><code class="language-js">// 输出全局变量 __filename 的值
console.log( __filename ); // /Users/littleboy/Desktop/node-test/app.js
</code></pre>
<h3 id="__dirname">__dirname</h3>
<p>__dirname 表示当前执行脚本所在的目录。</p>
<h4 id="实例-2">实例</h4>
<p>创建文件 main.js ，代码如下所示：</p>
<pre><code class="language-js">// 输出全局变量 __dirname 的值
console.log( __dirname ); // /Users/littleboy/Desktop/node-test
</code></pre>
<h3 id="console">console</h3>
<p>console 用于提供控制台标准输出，它是由 Internet Explorer 的 JScript 引擎提供的调试工具，后来逐渐成为浏览器的实施标准。</p>
<p>Node.js 沿用了这个标准，提供与习惯行为一致的 console 对象，用于向标准输出流（stdout）或标准错误流（stderr）输出字符。</p>
<h4 id="实例-3">实例</h4>
<pre><code class="language-js">// 向标准输出流打印字符并以换行符结束。该方法接收若干 个参数，如果只有一个参数，则输出这个参数的字符串形式。如果有多个参数，则 以类似于C 语言 printf() 命令的格式输出。
console.log([data][, ...])

// 该命令的作用是返回信息性消息，这个命令与console.log差别并不大，除了在chrome中只会输出文字外，其余的会显示一个蓝色的惊叹号。
console.info([data][, ...])

// 输出错误消息的。控制台在出现错误时会显示是红色的叉子 。
console.error([data][, ...])

// 输出警告消息。控制台出现有黄色的惊叹号。
console.warn([data][, ...])

// 用来对一个对象进行检查（inspect），并以易于阅读和打印的格式显示。
console.dir(obj[, options])

// 输出时间，表示计时开始。
console.time(label)

// 结束时间，表示计时结束。
console.timeEnd(label)

// 当前执行的代码在堆栈中的调用路径，这个测试函数运行很有帮助，只要给想测试的函数里面加入 console.trace 就行了。
console.trace(message[, ...])

// 用于判断某个表达式或变量是否为真，接收两个参数，第一个参数是表达式，第二个参数是字符串。只有当第一个参数为false，才会输出第二个参数，否则不会有任何结果。
console.assert(value[, message][, ...])
</code></pre>
<h3 id="process">process</h3>
<p>process 是一个全局变量，即 global 对象的属性。</p>
<p>它用于描述当前Node.js 进程状态的对象，提供了一个与操作系统的简单接口。通常在你写本地命令行程序的时候，少不了要 和它打交道。下面将会介绍 process 对象的一些最常用的成员方法</p>
<ul>
<li>exit - 当进程准备退出时触发。</li>
<li>beforeExit - 当 node 清空事件循环，并且没有其他安排时触发这个事件。通常来说，当没有进程安排时 node 退出，但是 'beforeExit' 的监听器可以异步调用，这样 node 就会继续执行。</li>
<li>uncaughtException - 当一个异常冒泡回到事件循环，触发这个事件。如果给异常添加了监视器，默认的操作（打印堆栈跟踪信息并退出）就不会发生。</li>
<li>Signal 事件 - 当进程接收到信号时就触发。信号列表详见标准的 POSIX 信号名，如 SIGINT、SIGUSR1 等。</li>
</ul>
<h4 id="实例-4">实例</h4>
<p>创建文件 main.js ，代码如下所示：</p>
<pre><code class="language-js">process.on('exit', function(code) {
  // 以下代码永远不会执行
  setTimeout(function() {
    console.log(&quot;该代码不会执行&quot;);
  }, 0);
  
  console.log('退出码为:', code);
});
console.log(&quot;程序执行结束&quot;);
</code></pre>
<h4 id="退出状态码">退出状态码</h4>
<ul>
<li>Uncaught Fatal Exception - 有未捕获异常，并且没有被域或 uncaughtException 处理函数处理。</li>
<li>Unused - 保留</li>
<li>Internal JavaScript Parse Error - JavaScript的源码启动 Node 进程时引起解析错误。非常罕见，仅会在开发 Node 时才会有。</li>
<li>Internal JavaScript Evaluation Failure - JavaScript 的源码启动 Node 进程，评估时返回函数失败。非常罕见，仅会在开发 Node 时才会有。</li>
<li>Fatal Error - V8 里致命的不可恢复的错误。通常会打印到 stderr ，内容为： FATAL ERROR</li>
<li>Non-function Internal Exception Handler - 未捕获异常，内部异常处理函数不知为何设置为on-function，并且不能被调用。</li>
<li>Internal Exception Handler Run-Time Failure - 未捕获的异常， 并且异常处理函数处理时自己抛出了异常。例如，如果 process.on('uncaughtException') 或 domain.on('error') 抛出了异常。</li>
<li>Invalid Argument - 可能是给了未知的参数，或者给的参数没有值。</li>
<li>Internal JavaScript Run-Time Failure - JavaScript的源码启动 Node 进程时抛出错误，非常罕见，仅会在开发 Node 时才会有。</li>
<li>Invalid Debug Argument - 设置了参数--debug 和/或 --debug-brk，但是选择了错误端口。</li>
<li>Signal Exits - 如果 Node 接收到致命信号，比如SIGKILL 或 SIGHUP，那么退出代码就是128 加信号代码。这是标准的 Unix 做法，退出信号代码放在高位。</li>
</ul>
<h4 id="process-属性">Process 属性</h4>
<ul>
<li>stdout - 标准输出流。</li>
<li>stderr - 标准错误流。</li>
<li>stdin - 标准输入流。</li>
<li>argv - argv 属性返回一个数组，由命令行执行脚本时的各个参数组成。它的第一个成员总是node，第二个成员是脚本文件名，其余成员是脚本文件的参数。</li>
<li>execPath - 返回执行当前脚本的 Node 二进制文件的绝对路径。</li>
<li>execArgv - 返回一个数组，成员是命令行下执行脚本时，在Node可执行文件与脚本文件之间的命令行参数。</li>
<li>env - 返回一个对象，成员为当前 shell 的环境变量</li>
<li>exitCode - 进程退出时的代码，如果进程优通过 process.exit() 退出，不需要指定退出码。</li>
<li>version - Node 的版本，比如v0.10.18。</li>
<li>versions - 一个属性，包含了 node 的版本和依赖.</li>
<li>config - 一个包含用来编译当前 node 执行文件的 javascript 配置选项的对象。它与运行 ./configure 脚本生成的 &quot;config.gypi&quot; 文件相同。</li>
<li>pid - 当前进程的进程号。</li>
<li>title - 进程名，默认值为&quot;node&quot;，可以自定义该值。</li>
<li>arch - 当前 CPU 的架构：'arm'、'ia32' 或者 'x64'。</li>
<li>platform - 运行程序所在的平台系统 'darwin', 'freebsd', 'linux', 'sunos' 或 'win32'</li>
<li>mainModule - require.main 的备选方法。不同点，如果主模块在运行时改变，require.main可能会继续返回老的模块。可以认为，这两者引用了同一个模块。</li>
</ul>
<h4 id="实例-5">实例</h4>
<p>创建文件 main.js ，代码如下所示：</p>
<pre><code class="language-js">// 输出到终端
process.stdout.write(&quot;Hello World!&quot; + &quot;\n&quot;);

// 通过参数读取
process.argv.forEach(function(val, index, array) {
   console.log(index + ': ' + val);
});

// 获取执行路径
console.log(process.execPath);


// 平台信息
console.log(process.platform);
</code></pre>
<h4 id="方法参考手册">方法参考手册</h4>
<p>Process 提供了很多有用的方法，便于我们更好的控制系统的交互：</p>
<ul>
<li>abort() - 这将导致 node 触发 abort 事件。会让 node 退出并生成一个核心文件。</li>
<li>chdir(directory) - 改变当前工作进程的目录，如果操作失败抛出异常。</li>
<li>cwd() - 返回当前进程的工作目录</li>
<li>exit([code]) - 使用指定的 code 结束进程。如果忽略，将会使用 code 0。</li>
<li>getgid() - 获取进程的群组标识（参见 getgid(2)）。获取到得时群组的数字 id，而不是名字。</li>
<li>setgid(id) - 设置进程的群组标识（参见 setgid(2)）。可以接收数字 ID 或者群组名。如果指定了群组名，会阻塞等待解析为数字 ID</li>
<li>getuid() - 获取进程的用户标识(参见 getuid(2))。这是数字的用户 id，不是用户名。</li>
<li>setuid(id) - 设置进程的用户标识（参见setuid(2)）。接收数字 ID或字符串名字。果指定了群组名，会阻塞等待解析为数字 ID 。</li>
<li>getgroups() - 返回进程的群组 iD 数组。POSIX 系统没有保证一定有，但是 node.js 保证有。</li>
<li>setgroups(groups) - 设置进程的群组 ID。这是授权操作，所以你需要有 root 权限，或者有 CAP_SETGID 能力。</li>
<li>initgroups(user, extra_group) - 读取 /etc/group ，并初始化群组访问列表，使用成员所在的所有群组。这是授权操作，所以你需要有 root 权限，或者有 CAP_SETGID 能力。</li>
<li>kill(pid[, signal]) - 发送信号给进程. pid 是进程id，并且 signal 是发送的信号的字符串描述。信号名是字符串，比如 'SIGINT' 或 'SIGHUP'。如果忽略，信号会是 'SIGTERM'。</li>
<li>memoryUsage() - 返回一个对象，描述了 Node 进程所用的内存状况，单位为字节。</li>
<li>nextTick(callback) - 一旦当前事件循环结束，调用回调函数。</li>
<li>umask([mask]) - 设置或读取进程文件的掩码。子进程从父进程继承掩码。如果mask 参数有效，返回旧的掩码。否则，返回当前掩码。</li>
<li>uptime() - 返回 Node 已经运行的秒数。</li>
<li>hrtime() - 返回当前进程的高分辨时间，形式为 [seconds, nanoseconds]数组。它是相对于过去的任意事件。该值与日期无关，因此不受时钟漂移的影响。主要用途是可以通过精确的时间间隔，来衡量程序的性能。</li>
</ul>
<h4 id="实例-6">实例</h4>
<p>创建文件 main.js ，代码如下所示：</p>
<pre><code class="language-js">// 输出当前目录
console.log('当前目录: ' + process.cwd());

// 输出当前版本
console.log('当前版本: ' + process.version);

// 输出内存使用情况
console.log(process.memoryUsage());
</code></pre>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>
              
            
              <div id="comments" class="bg-white hosted ">
                <div class="clear"></div>
<script>
jQuery(document).ready(function($){
    $('.vemoji-btn').text('😀');
    $("#comments").on('click', 'span.vat',function(){
        $(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
        $('textarea#veditor').focus();
    })
    if(window.location.hash){
        var checkExist = setInterval(function() {
            if ($(window.location.hash).length) {
                $('html, body').animate({scrollTop: $(window.location.hash).offset().top-200}, 600);
                clearInterval(checkExist);
            }
        }, 100);
    }
})
</script>

              </div>
            

            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="/ssh-mi-yao-fang-shi-yuan-cheng-lian-jie-linux" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('/media/images/gridea.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2020-09-29">2020-09-29</time>
                      <h4 class="title usmall">
                        <a href="/ssh-mi-yao-fang-shi-yuan-cheng-lian-jie-linux">SSH密钥方式远程连接Linux</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="/linux-chang-jian-ming-ling" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('/media/images/gridea.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2020-09-29">2020-09-29</time>
                      <h4 class="title usmall">
                        <a href="/linux-chang-jian-ming-ling">Linux 常见命令</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="/linux-an-zhuang-docker" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('/media/images/gridea.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2020-09-29">2020-09-29</time>
                      <h4 class="title usmall">
                        <a href="/linux-an-zhuang-docker">Linux 安装 Docker</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="/mOE9vbkrU" class="ctag ctag-0 ctag-mOE9vbkrU" aria-label="">Linux</a>
                    
                      <a href="/b02rvhSHe" class="ctag ctag-1 ctag-b02rvhSHe" aria-label="">JavaScript</a>
                    
                      <a href="/A6Q75Twsp" class="ctag ctag-2 ctag-A6Q75Twsp" aria-label="">NodeJS</a>
                    
                      <a href="/daPyJFle1" class="ctag ctag-3 ctag-daPyJFle1" aria-label="">面试题</a>
                    
                      <a href="/-bPu6JFhz" class="ctag ctag-4 ctag--bPu6JFhz" aria-label="">QA</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">LittleBoy-前端爱好者</a></h4>
                    <p class="founder">一位前端爱好者的大前端养成记</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/zhourengui" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href=""><img src="/media/images/custom-footerLogo.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2020 共 19 篇文章
          Author by <a href="javascript:void(0)">「LittleBoy」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    
    <div class="clear"></div>

        
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/valine/1.3.10/Valine.Pure.min.js"></script>
<script>
    new Valine({
        el: '#comments',
        appId: 'bEuEMACG0o7iNnryQQYgfLE2-gzGzoHsz' ,
        appKey: 'Xkv8kTC4SwEtYxpQs6EuyuSS',
        pageSize: 30,
        placeholder: '既然来了，那就留个痕迹吧~',
        visitor: true // 阅读量统计
    })
</script>
    

      
    <script src="/media/js/functions-post.js"></script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
